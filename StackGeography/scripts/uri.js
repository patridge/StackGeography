/* Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php */

(function(){window.IPv6={best:function(h){var h=h.toLowerCase().split(":"),i=h.length,j=8;""===h[0]&&""===h[1]&&""===h[2]?(h.shift(),h.shift()):""===h[0]&&""===h[1]?h.shift():""===h[i-1]&&""===h[i-2]&&h.pop();i=h.length;-1!==h[i-1].indexOf(".")&&(j=7);var c;for(c=0;c<i&&!(""===h[c]);c++);if(c<j)for(h.splice(c,1,"0000");h.length<j;)h.splice(c,0,"0000");for(c=0;c<j;c++){for(var i=h[c].split(""),e=0;3>e;e++)if("0"===i[0]&&1<i.length)i.splice(0,1);else break;h[c]=i.join("")}var i=-1,l=e=0,k=-1,s=!1;for(c=
0;c<j;c++)s?"0"===h[c]?l+=1:(s=!1,l>e&&(i=k,e=l)):"0"==h[c]&&(s=!0,k=c,l=1);l>e&&(i=k,e=l);1<e&&h.splice(i,e,"");i=h.length;j="";""===h[0]&&(beststr=":");for(c=0;c<i;c++){j+=h[c];if(c===i-1)break;j+=":"}""===h[i-1]&&(j+=":");return j}}})();(function(h){function i(a){throw RangeError(F[a]);}function j(a,b){for(var d=a.length;d--;)a[d]=b(a[d]);return a}function c(a){for(var b=[],d=0,c=a.length,f,e;d<c;)f=a.charCodeAt(d++),55296==(f&63488)&&(e=a.charCodeAt(d++),(55296!=(f&64512)||56320!=(e&64512))&&i("ucs2decode"),f=((f&1023)<<10)+(e&1023)+65536),b.push(f);return b}function e(a){return j(a,function(a){var b="";55296==(a&63488)&&i("ucs2encode");65535<a&&(a-=65536,b+=w(a>>>10&1023|55296),a=56320|a&1023);return b+=w(a)}).join("")}function l(a,
b,c){for(var f=0,a=c?u(a/q):a>>1,a=a+u(a/b);a>A*x>>1;f+=d)a=u(a/A);return u(f+(A+1)*a/(a+g))}function k(a){var c=[],h=a.length,g,j=0,k=C,y=D,m,p,n,o,q;m=a.lastIndexOf(E);0>m&&(m=0);for(p=0;p<m;++p)128<=a.charCodeAt(p)&&i("not-basic"),c.push(a.charCodeAt(p));for(m=0<m?m+1:0;m<h;){for(p=j,g=1,n=d;;n+=d){m>=h&&i("invalid-input");o=a.charCodeAt(m++);o=10>o-48?o-22:26>o-65?o-65:26>o-97?o-97:d;(o>=d||o>u((b-j)/g))&&i("overflow");j+=o*g;q=n<=y?f:n>=y+x?x:n-y;if(o<q)break;o=d-q;g>u(b/o)&&i("overflow");g*=
o}g=c.length+1;y=l(j-p,g,0==p);u(j/g)>b-k&&i("overflow");k+=u(j/g);j%=g;c.splice(j++,0,k)}return e(c)}function s(a){var g,e,h,j,k,q,m,p,n,o=[],r,s,v,a=c(a);r=a.length;g=C;e=0;k=D;for(q=0;q<r;++q)n=a[q],128>n&&o.push(w(n));for((h=j=o.length)&&o.push(E);h<r;){for(m=b,q=0;q<r;++q)n=a[q],n>=g&&n<m&&(m=n);s=h+1;m-g>u((b-e)/s)&&i("overflow");e+=(m-g)*s;g=m;for(q=0;q<r;++q)if(n=a[q],n<g&&++e>b&&i("overflow"),n==g){for(p=e,m=d;;m+=d){n=m<=k?f:m>=k+x?x:m-k;if(p<n)break;v=p-n;p=d-n;o.push(w(n+v%p+22+75*(26>
n+v%p)-0));p=u(v/p)}o.push(w(p+22+75*(26>p)-0));k=l(e,s,h==j);e=0;++h}++e;++g}return o.join("")}var r,B="function"==typeof define&&"object"==typeof define.amd&&define.amd&&define,v="object"==typeof exports&&exports,a="object"==typeof module&&module,b=2147483647,d=36,f=1,x=26,g=38,q=700,D=72,C=128,E="-",G=/[^ -~]/,H=/^xn--/,F={overflow:"Overflow: input needs wider integers to process.",ucs2decode:"UCS-2(decode): illegal sequence",ucs2encode:"UCS-2(encode): illegal value","not-basic":"Illegal input >= 0x80 (not a basic code point)",
"invalid-input":"Invalid input"},A=d-f,u=Math.floor,w=String.fromCharCode,z;r={version:"0.3.0",ucs2:{decode:c,encode:e},decode:k,encode:s,toASCII:function(a){return j(a.split("."),function(a){return G.test(a)?"xn--"+s(a):a}).join(".")},toUnicode:function(a){return j(a.split("."),function(a){return H.test(a)?k(a.slice(4).toLowerCase()):a}).join(".")}};if(v)if(a&&a.exports==v)a.exports=r;else for(z in r)r.hasOwnProperty(z)&&(v[z]=r[z]);else B?define("punycode",r):h.punycode=r})(this);(function(h){function i(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function j(a){return"[object Array]"===""+Object.prototype.toString.call(a)}var c=function(a,b){if(!(this instanceof c))return new c(a);a===h&&(a=location.href+"");this.href(a);return b!==h?this.absoluteTo(b):this},e=c.prototype;c.idn_expression=/[^a-z0-9\.-]/i;c.punycode_expression=/(xn--)/i;c.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;c.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;
c.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/ig;c.defaultPorts={http:"80",https:"443",ftp:"21"};c.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/;c.encode=encodeURIComponent;c.decode=decodeURIComponent;c.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&",
"%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}}};c.encodeQuery=function(a){return encodeURIComponent(a+"").replace(/%20/g,"+")};c.decodeQuery=function(a){return decodeURIComponent((a+"").replace(/\+/g,"%20"))};c.recodePath=function(a){for(var a=(a+"").split("/"),b=0,d=a.length;b<d;b++)a[b]=c.encodePathSegment(c.decode(a[b]));return a.join("/")};c.decodePath=function(a){for(var a=(a+"").split("/"),b=0,d=a.length;b<d;b++)a[b]=
c.decodePathSegment(a[b]);return a.join("/")};var l={encode:"encode",decode:"decode"},k;for(k in l)c[k+"PathSegment"]=function(a){return function(b){return window[a+"URIComponent"](b+"").replace(c.characters.pathname[a].expression,function(b){return c.characters.pathname[a].map[b]})}}(l[k]);c.parse=function(a){var b,d={};b=a.indexOf("#");if(-1<b)d.fragment=a.substring(b+1)||null,a=a.substring(0,b);b=a.indexOf("?");if(-1<b)d.query=a.substring(b+1)||null,a=a.substring(0,b);b=a.indexOf("://");if(-1<
b)d.protocol=a.substring(0,b),a=a.substring(b+3),a=c.parseAuthority(a,d);d.path=a;return d};c.parseHost=function(a,b){var d=a.indexOf("/");if(-1===d)d=a.length;if("["===a[0]){var c=a.indexOf("]");b.hostname=a.substring(1,c)||null;b.port=a.substring(c+2,d)||null}else a.indexOf(":")!==a.lastIndexOf(":")?(b.hostname=a.substring(0,d)||null,b.port=null):(t=a.substring(0,d).split(":"),b.hostname=t[0]||null,b.port=t[1]||null);b.hostname&&"/"!==a.substring(d)[0]&&(d++,a="/"+a);return a.substring(d)||"/"};
c.parseAuthority=function(a,b){var d=a.indexOf("@"),f=a.indexOf("/");-1<d&&(-1===f||d<f)?(t=a.substring(0,d).split(":"),b.username=t[0]?c.decode(t[0]):null,b.password=t[1]?c.decode(t[1]):null,a=a.substring(d+1)):(b.username=null,b.password=null);return c.parseHost(a,b)};c.parseQuery=function(a){if(!a)return{};a=a.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!a)return{};for(var b={},a=a.split("&"),d=a.length,f=0;f<d;f++){var e=a[f].split("="),g=c.decodeQuery(e.shift()),e=e.length?c.decodeQuery(e.join("=")):
null;b[g]?("string"===typeof b[g]&&(b[g]=[b[g]]),b[g].push(e)):b[g]=e}return b};c.build=function(a){var b="";"string"===typeof a.protocol&&a.protocol.length&&(b+=a.protocol+"://");b+=c.buildAuthority(a)||"";"string"===typeof a.path&&("/"!==a.path[0]&&"string"===typeof a.hostname&&(b+="/"),b+=a.path);"string"==typeof a.query&&(b+="?"+a.query);"string"===typeof a.fragment&&(b+="#"+a.fragment);return b};c.buildHost=function(a){var b="";if(a.hostname)c.ip6_expression.test(a.hostname)?b=a.port?b+("["+
a.hostname+"]:"+a.port):b+a.hostname:(b+=a.hostname,a.port&&(b+=":"+a.port));else return"";return b};c.buildAuthority=function(a){var b="";a.username&&(b+=c.encode(a.username),a.password&&(b+=":"+c.encode(a.password)),b+="@");return b+=c.buildHost(a)};c.buildQuery=function(a,b){var d="",f;for(f in a)if(Object.hasOwnProperty.call(a,f)&&f)if(j(a[f]))for(var e={},g=0,i=a[f].length;g<i;g++)a[f][g]!==h&&e[a[f][g]+""]===h&&(d+="&"+c.buildQueryParameter(f,a[f][g]),!0!==b&&(e[a[f][g]+""]=!0));else a[f]!==
h&&(d+="&"+c.buildQueryParameter(f,a[f]));return d.substring(1)};c.buildQueryParameter=function(a,b){return c.encodeQuery(a)+(null!==b?"="+c.encodeQuery(b):"")};c.addQuery=function(a,b,d){if("object"===typeof b)for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&c.addQuery(a,f,b[f]);else if("string"===typeof b)a[b]===h?a[b]=d:("string"===typeof a[b]&&(a[b]=[a[b]]),j(d)||(d=[d]),a[b]=a[b].concat(d));else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");};
c.removeQuery=function(a,b,d){if(j(b))for(var d=0,f=b.length;d<f;d++)a[b[d]]=h;else if("object"===typeof b)for(f in b)Object.prototype.hasOwnProperty.call(b,f)&&c.removeQuery(a,f,b[f]);else if("string"===typeof b)if(d!==h)if(a[b]===d)a[b]=h;else{if(j(a[b])){var f=a[b],e={},g,i;if(j(d))for(g=0,i=d.length;g<i;g++)e[d[g]]=!0;else e[d]=!0;for(g=0,i=f.length;g<i;g++)e[f[g]]!==h&&(f.splice(g,1),i--,g--);a[b]=f}}else a[b]=h;else throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");
};c.commonPath=function(a,b){var d=Math.min(a.length,b.length),c;for(c=0;c<d;c++)if(a[c]!==b[c]){c--;break}if(1>c)return a[0]===b[0]&&"/"===a[0]?"/":"";"/"!==a[c]&&(c=a.substring(0,c).lastIndexOf("/"));return a.substring(0,c+1)};c.withinString=function(a,b){return a.replace(c.find_uri_expression,b)};c.ensureValidHostname=function(a){if(a.match(c.invalid_hostname_characters)){if(!window.punycode)throw new TypeError("Hostname '"+a+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");
if(punycode.toASCII(a).match(c.invalid_hostname_characters))throw new TypeError("Hostname '"+a+"' contains characters other than [A-Z0-9.-]");}};e.build=function(a){if(!0===a)this._deferred_build=!0;else if(a===h||this._deferred_build)this._string=c.build(this._parts),this._deferred_build=!1;return this};e.toString=function(){return this.build(!1)._string};e.valueOf=function(){return this.toString()};l={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"};for(k in l)e[k]=
function(a){return function(b,c){if(b===h)return this._parts[a]||"";this._parts[a]=b;this.build(!c);return this}}(l[k]);l={query:"?",fragment:"#"};for(k in l)e[k]=function(a,b){return function(c,f){if(c===h)return this._parts[a]||"";null!==c&&(c+="",c[0]===b&&(c=c.substring(1)));this._parts[a]=c;this.build(!f);return this}}(k,l[k]);l={search:["?","query"],hash:["#","fragment"]};for(k in l)e[k]=function(a,b){return function(c,f){var e=this[a](c,f);return"string"===typeof e&&e.length?b+e:e}}(l[k][1],
l[k][0]);e.pathname=function(a,b){if(a===h||!0===a){var d=this._parts.path||"/";return a?c.decodePath(d):d}this._parts.path=a?c.recodePath(a):"/";this.build(!b);return this};e.path=e.pathname;e.href=function(a,b){if(a===h)return this.toString();this._string="";this._parts={protocol:null,username:null,password:null,hostname:null,port:null,path:null,query:null,fragment:null};var d=a instanceof c,f="object"===typeof a&&(a.hostname||a.path),e;if("string"===typeof a)this._parts=c.parse(a);else if(d||f)for(e in d=
d?a._parts:a,d)Object.hasOwnProperty.call(this._parts,e)&&(this._parts[e]=d[e]);else throw new TypeError("invalid input");this.build(!b);return this};e.is=function(a){var b=!1,d=!1,f=!1,e=!1,g=!1,h=!1,i=!0;this._parts.hostname&&(i=!1,d=c.ip4_expression.test(this._parts.hostname),f=c.ip6_expression.test(this._parts.hostname),b=d||f,g=(e=!b)&&c.idn_expression.test(this._parts.hostname),h=e&&c.punycode_expression.test(this._parts.hostname));switch(a.toLowerCase()){case "relative":return i;case "domain":case "name":return e;
case "ip":return b;case "ip4":case "ipv4":case "inet4":return d;case "ip6":case "ipv6":case "inet6":return f;case "idn":return g;case "punycode":return h}return null};var s=e.protocol,r=e.port,B=e.hostname;e.protocol=function(a,b){if(a!==h&&a)if(":"===a[a.length-1])a=a.substring(0,a.length-1);else if(a.match(/[^a-zA-z0-9\.+-]/))throw new TypeError("Protocol '"+a+"' contains characters other than [A-Z0-9.+-]");return s.call(this,a,b)};e.port=function(a,b){if(a!==h&&(0===a&&(a=null),a&&(a+="",":"===
a[0]&&(a=a.substring(1)),a.match(/[^0-9]/))))throw new TypeError("Port '"+a+"' contains characters other than [0-9]");return r.call(this,a,b)};e.hostname=function(a,b){if(a!==h){var d={};c.parseHost(a,d);a=d.hostname}return B.call(this,a,b)};e.host=function(a,b){if(a===h)return this._parts.hostname?c.buildHost(this._parts):"";c.parseHost(a,this._parts);this.build(!b);return this};e.authority=function(a,b){if(a===h)return this._parts.hostname?c.buildAuthority(this._parts):"";c.parseAuthority(a,this._parts);
this.build(!b);return this};e.subdomain=function(a,b){if(a===h)return!this._parts.hostname||this.is("IP")?"":this._parts.hostname.substring(0,this._parts.hostname.length-this.domain().length-1)||"";var d=this._parts.hostname.substring(0,this._parts.hostname.length-this.domain().length),d=RegExp("^"+i(d));a&&"."!==a[a.length-1]&&(a+=".");a&&c.ensureValidHostname(a);this._parts.hostname=this._parts.hostname.replace(d,a);this.build(!b);return this};e.domain=function(a,b){if(a===h)return!this._parts.hostname||
this.is("IP")?"":this._parts.hostname.match(/\.?([^\.]+\.[^\.]+)$/)[1]||this._parts.hostname;if(!a)throw new TypeError("cannot set domain empty");c.ensureValidHostname(a);this._parts.hostname=!this._parts.hostname||this.is("IP")?a:this._parts.hostname.replace(RegExp(i(this.domain())+"$"),a);this.build(!b);return this};e.tld=function(a,b){if(a===h)return!this._parts.hostname||this.is("IP")?"":this._parts.hostname.substring(this._parts.hostname.lastIndexOf(".")+1);if(a){if(a.match(/[^a-zA-Z0-9-]/))throw new TypeError("TLD '"+
a+"' contains characters other than [A-Z0-9]");if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");this._parts.hostname=this._parts.hostname.replace(RegExp(i(this.tld())+"$"),a)}else throw new TypeError("cannot set TLD empty");this.build(!b);return this};e.directory=function(a,b){if(a===h||!0===a){if(!this._parts.path||"/"===this._parts.path)return"/";var d=this._parts.path.substring(0,this._parts.path.length-this.filename().length-1)||"/";return a?
c.decodePath(d):d}d=this._parts.path.substring(0,this._parts.path.length-this.filename().length);d=RegExp("^"+i(d));this.is("relative")||(a||(a="/"),"/"!==a[0]&&(a="/"+a));a&&"/"!==a[a.length-1]&&(a+="/");a=c.recodePath(a);this._parts.path=this._parts.path.replace(d,a);this.build(!b);return this};e.filename=function(a,b){if(a===h||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var d=this._parts.path.substring(this._parts.path.lastIndexOf("/")+1);return a?c.decodePathSegment(d):d}d=
!1;"/"===a[0]&&(a=a.substring(1));a.match(/\.?\//)&&(d=!0);var f=RegExp(i(this.filename())+"$"),a=c.recodePath(a);this._parts.path=this._parts.path.replace(f,a);d?this.normalizePath(b):this.build(!b);return this};e.suffix=function(a,b){if(a===h||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var d=this.filename(),f=d.lastIndexOf(".");if(-1===f)return"";d=d.substring(f+1);res=/^[a-z0-9%]+$/i.test(d)?d:"";return a?c.decodePathSegment(res):res}"."===a[0]&&(a=a.substring(1));if(d=this.suffix())f=
a?RegExp(i(d)+"$"):RegExp(i("."+d)+"$");else{if(!a)return this;this._parts.path+="."+c.recodePath(a)}if(f)a=c.recodePath(a),this._parts.path=this._parts.path.replace(f,a);this.build(!b);return this};var v=e.query;e.query=function(a,b){if(!0===a)return c.parseQuery(this._parts.query);return a!==h&&"string"!==typeof a?(this._parts.query=c.buildQuery(a),this.build(!b),this):v.call(this,a,b)};e.addQuery=function(a,b,d){var f=c.parseQuery(this._parts.query);c.addQuery(f,a,b);this._parts.query=c.buildQuery(f);
"string"!==typeof a&&(d=b);this.build(!d);return this};e.removeQuery=function(a,b,d){var f=c.parseQuery(this._parts.query);c.removeQuery(f,a,b);this._parts.query=c.buildQuery(f);"string"!==typeof a&&(d=b);this.build(!d);return this};e.addSearch=e.addQuery;e.removeSearch=e.removeQuery;e.normalize=function(){return this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()};e.normalizeProtocol=function(a){if("string"===typeof this._parts.protocol)this._parts.protocol=
this._parts.protocol.toLowerCase(),this.build(!a);return this};e.normalizeHostname=function(a){if(this._parts.hostname){if(this.is("IDN")&&window.punycode)this._parts.hostname=punycode.toASCII(this._parts.hostname);else if(this.is("IPv6")&&window.IPv6)this._parts.hostname=IPv6.best(this._parts.hostname);this._parts.hostname=this._parts.hostname.toLowerCase();this.build(!a)}return this};e.normalizePort=function(a){if("string"===typeof this._parts.protocol&&this._parts.port===c.defaultPorts[this._parts.protocol])this._parts.port=
null,this.build(!a);return this};e.normalizePath=function(a){if(!this._parts.path||"/"===this._parts.path)return this;var b,d,f=this._parts.path,e,g;"/"!==f[0]&&("."===f[0]&&(d=f.substring(0,f.indexOf("/"))),b=!0,f="/"+f);for(f=f.replace(/(\/(\.\/)+)|\/{2,}/g,"/");;){e=f.indexOf("/../");if(-1===e)break;else if(0===e){f=f.substring(3);break}g=f.substring(0,e).lastIndexOf("/");-1===g&&(g=e);f=f.substring(0,g)+f.substring(e+3)}b&&this.is("relative")&&(f=d?d+f:f.substring(1));f=c.recodePath(f);this._parts.path=
f;this.build(!a);return this};e.normalizePathname=e.normalizePath;e.normalizeQuery=function(a){if("string"===typeof this._parts.query)this._parts.query.length?this.query(c.parseQuery(this._parts.query)):this._parts.query=null,this.build(!a);return this};e.normalizeFragment=function(a){if(!this._parts.fragment)this._parts.fragment=null,this.build(!a);return this};e.normalizeSearch=e.normalizeQuery;e.normalizeHash=e.normalizeFragment;e.readable=function(){var a=new c(this);a.username("").password("").normalize();
var b="";a._parts.protocol&&(b+=a._parts.protocol+"://");a._parts.hostname&&(a.is("punycode")&&window.punycode?(b+=punycode.toUnicode(a._parts.hostname),a._parts.port&&(b+=":"+a._parts.port)):b+=a.host());a._parts.hostname&&a._parts.path&&"/"!==a._parts.path[0]&&(b+="/");b+=a.path(!0);if(a._parts.query){for(var d="",f=0,e=a._parts.query.split("&"),g=e.length;f<g;f++){var i=(e[f]||"").split("="),d=d+("&"+c.decodeQuery(i[0]).replace(/&/g,"%26"));i[1]!==h&&(d+="="+c.decodeQuery(i[1]).replace(/&/g,"%26"))}b+=
"?"+d.substring(1)}return b+=a.hash()};e.absoluteTo=function(a){if(!this.is("relative"))throw Error("Cannot resolve non-relative URL");a instanceof c||(a=new c(a));for(var b=new c(this),d=["protocol","username","password","hostname","port"],f=0,e;e=d[f];f++)b._parts[e]=a._parts[e];if("/"!==b.path()[0])b._parts.path=a.directory()+"/"+b._parts.path,b.normalizePath();b.build();return b};e.relativeTo=function(a){a instanceof c||(a=new c(a));if("/"!==this.path()[0]||"/"!==a.path()[0])throw Error("Cannot calculate common path from non-relative URLs");
for(var b=new c(this),d=["protocol","username","password","hostname","port"],f=c.commonPath(b.path(),a.path()),a=a.directory(),e=0,g;g=d[e];e++)b._parts[g]=null;if(!f||"/"===f)return b;if(a+"/"===f)b._parts.path="./"+b.filename();else{d="../";f=RegExp("^"+i(f));for(a=a.replace(f,"/").match(/\//g).length-1;a--;)d+="../";b._parts.path=b._parts.path.replace(f,d)}b.build();return b};e.equals=function(a){var b=new c(this),d=new c(a),f={},e={},a={},g;b.normalize();d.normalize();if(b.toString()===d.toString())return!0;
f=b.query();e=d.query();b.query("");d.query("");if(b.toString()!==d.toString())return!1;if(f.length!==e.length)return!1;f=c.parseQuery(f);e=c.parseQuery(e);for(g in f)if(Object.prototype.hasOwnProperty.call(f,g)){if(j(f[g])){if(!j(e[g]))return!1;if(f[g].length!==e[g].length)return!1;f[g].sort();e[g].sort();b=0;for(d=f[g].length;b<d;b++)if(f[g][b]!==e[g][b])return!1}else if(f[g]!==e[g])return!1;a[g]=!0}for(g in e)if(Object.prototype.hasOwnProperty.call(e,g)&&!a[g])return!1;return!0};window.URI=c})();